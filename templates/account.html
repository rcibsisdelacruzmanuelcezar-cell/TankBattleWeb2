<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tank Landship - My Account</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <nav class="navbar">
        <div class="nav-brand">üõ°Ô∏è TANK LANDSHIP</div>
        <div class="nav-links">
            <a href="{{ url_for('lobby') }}">Back to Lobby</a>
            <a href="{{ url_for('logout') }}">Logout</a>
        </div>
    </nav>

    <div class="account-container">
        <h1>My Account</h1>
        
        <div class="account-info">
            <h2>Profile Information</h2>
            <p><strong>Username:</strong> {{ username }}</p>
            <p><strong>Email:</strong> {{ email }}</p>
        </div>

        <div class="account-stats">
            <h2>Battle Statistics</h2>
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-value">{{ stats.total_games or 0 }}</div>
                    <div class="stat-label">Total Battles</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">{{ stats.wins or 0 }}</div>
                    <div class="stat-label">Victories</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">{{ stats.losses or 0 }}</div>
                    <div class="stat-label">Defeats</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">
                        {% set ai_games = (stats.wins or 0) + (stats.losses or 0) %}
                        {% if ai_games > 0 %}
                            {{ "%.1f"|format((stats.wins / ai_games * 100)) }}%
                        {% else %}
                            0%
                        {% endif %}
                    </div>
                    <div class="stat-label">Win Rate</div>
                </div>
            </div>
        </div>

        <div class="recent-games">
            <h2>Recent Battles</h2>
            {% if recent_games %}
                <table class="games-table">
                    <thead>
                        <tr>
                            <th>Date</th>
                            <th>Your Nation</th>
                            <th>Opponent Nation</th>
                            <th>Mode</th>
                            <th>Result</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for game in recent_games %}
                        <tr>
                            <td>{{ game.played_at.strftime('%Y-%m-%d %H:%M') }}</td>
                            <td>{{ game.player1_nation }}</td>
                            <td>{{ game.player2_nation }}</td>
                            <td>{{ game.game_mode }}</td>
                            <td class="{% if game.result == 'Victory' %}win{% elif game.result == 'Defeat' %}loss{% else %}neutral{% endif %}">
                                {{ game.result }}
                            </td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            {% else %}
                <p>No battle history yet. Start your first battle!</p>
            {% endif %}
        </div>
    </div>
</body>
</html>
